# CLAUDE.md

このファイルは、このリポジトリで作業するClaude Code (claude.ai/code)にガイダンスを提供します。

## プロジェクト概要

ワイチャ！は、オンラインセミナー中に匿名でリアルタイム反応を可能にするセミナー反応システムです。アプリケーションの構成：

- **フロントエンド**: Next.js 14 + React + TypeScript
- **リアルタイム通信**: Socket.IOサーバー（ポート3001）
- **スタイリング**: TailwindCSS
- **アーキテクチャ**: 独立したSocket.IOサーバー + Next.jsフロントエンド

## 開発コマンド

### セットアップ
```bash
npm install
```

### 開発
```bash
# 両方のサーバーを同時に起動
npm run dev-all

# または個別に起動
npm run server  # Socket.IOサーバー（ポート3001）
npm run dev     # Next.jsフロントエンド（ポート3000）
```

### 本番環境
```bash
npm run build
npm run start
```

### リント
```bash
npm run lint
```

## アーキテクチャ

### コアコンポーネント
- **ホームページ** (`src/app/page.tsx`): ルーム作成・参加インターフェース
- **ルームページ** (`src/app/room/[roomId]/page.tsx`): メインセミナールーム（反応ボタン付き）
- **Socket.IOサーバー** (`src/server.ts`): リアルタイム通信ハンドラー

### 主要機能の実装
- **匿名反応**: ユーザー認証不要
- **リアルタイム通信**: Socket.IOによるルーム別メッセージ配信
- **フローティングアニメーション**: 反応表示用CSSキーフレームアニメーション
- **色分けチャット**: 反応（青）、質問（オレンジ）
- **ルーム管理**: メモリベースのルーム保存（サーバー再起動時にリセット）

### ネットワーク設定
- `0.0.0.0`バインディングによるローカルネットワークアクセス対応
- Next.js開発サーバー: `npm run dev`で起動
- Socket.IOサーバー: `0.0.0.0:3001`でリッスン

## 重要事項

- Socket.IOサーバーとNext.jsの両方を同時に起動する必要がある
- ルームデータはメモリに保存され、サーバー再起動時に消失する
- ローカルネットワーク使用専用に設計されている
- Socket.IO接続URLはルームページで`localhost:3001`にハードコーディングされている

## ファイル構造

```
src/
├── app/
│   ├── page.tsx              # ホームページ（ルーム作成・参加）
│   ├── room/[roomId]/
│   │   └── page.tsx          # セミナールームインターフェース
│   └── globals.css           # TailwindCSS imports
├── server.ts                 # Socket.IOサーバー
└── ...
```

## 開発のヒント

- `npm run dev-all`で両方のサーバーを同時に起動
- Socket.IOサーバーは接続とルーム活動をログ出力
- メッセージはルームごとにメモリ内のMapに保存
- フローティングアニメーションは3秒間のCSSキーフレームを使用